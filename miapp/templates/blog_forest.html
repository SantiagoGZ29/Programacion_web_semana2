{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container mt-5">
    <div class="card mb-3 mx-auto" style="max-width: 100%; width: 100%; height: auto;">
        <div class="row g-0">
            <!-- Imagen ocupa más espacio -->
            <div class="col-md-6">
                <img src="{% static 'img/forest2.jpg' %}" class="img-fluid rounded-start" alt="..." style="height: 100%; object-fit: cover;">
            </div>
            <div class="col-md-6">
                <div class="card-body">
                    <h5 class="card-title display-4">Bienvenido, ingresa tu usuario</h5>

                    <!-- Formulario con id="login" para validación -->
                    <form id="login">
                        <div class="mb-3">
                            <label for="Email" class="form-label">Email</label>
                            <input type="text" class="form-control" id="email">
                            <small class="text-danger" id="email-error"></small>  
                        </div>
                        
                        <div class="mb-3">
                            <label for="Contraseña" class="form-label">Contraseña</label>
                            <input type="password" class="form-control" id="contraseña">
                            <small class="text-danger" id="contraseña-error"></small>  
                        </div>
                        
                        <!-- Checkbox para mostrar/ocultar contraseña -->
                        <div class="mb-3">
                            <input type="checkbox" id="show-password" class="form-check-input">
                            <label for="show-password" class="form-check-label">Mostrar Contraseña</label>
                        </div>

                        <div class="d-grid mb-3">
                            <button type="submit" class="btn btn-primary">Iniciar sesión</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Script para validar el formulario de inicio de sesión
    document.getElementById('login').addEventListener('submit', function(event) {
        event.preventDefault(); // Evitar el envío del formulario por defecto

        // Obtener los valores de los campos
        var email = document.getElementById('email').value;
        var contraseña = document.getElementById('contraseña').value;

        // Validar los campos
        var isValid = true;
        if (email === '') {
            document.getElementById('email-error').textContent = 'Por favor, ingresa tu email.';
            isValid = false;
        } else {
            document.getElementById('email-error').textContent = '';
        }

        if (contraseña === '') {
            document.getElementById('contraseña-error').textContent = 'Por favor, ingresa tu contraseña.';
            isValid = false;
        } else {
            document.getElementById('contraseña-error').textContent = '';
        }

        // Validar el formato del email (opcional)
        var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Expresión regular para validar el formato del email
        if (email && !emailPattern.test(email)) {
            document.getElementById('email-error').textContent = 'Por favor, ingresa un email válido.';
            isValid = false;
        }
        else {
            document.getElementById('email-error').textContent = '';
        }

        // Validar seguridad de la contraseña
        const regexContrasenna = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,18}$/;
        if (contraseña && !regexContrasenna.test(contraseña)) {
            document.getElementById('contraseña-error').textContent = 'La contraseña debe tener entre 8 y 18 caracteres, al menos una letra mayúscula, una letra minúscula, un número y un símbolo especial.';
            isValid = false;
        } else {
            document.getElementById('contraseña-error').textContent = '';
        }

        // Si todo es válido, puedes enviar el formulario o realizar otra acción
        if (isValid) {
            window.location.href = "{% url 'blog_forest2' %}"; // Aquí puedes enviar el formulario o hacer otra cosa
        }
    });

    // Script para mostrar u ocultar la contraseña
    document.getElementById('show-password').addEventListener('change', function() {
        var passwordField = document.getElementById('contraseña');
        if (this.checked) {
            passwordField.type = 'text'; // Mostrar contraseña
        } else {
            passwordField.type = 'password'; // Ocultar contraseña
        }
    });
</script>

{% endblock %}

